load("@io_bazel_rules_docker//container:container.bzl", "container_image", "container_layer")
load("@io_bazel_rules_docker//docker/util:run.bzl", "container_run_and_commit")

container_layer(
    name = "openjdk_debs_layer",
    files = [
        "@adwaita-icon-theme_3.22.0-1_deb9u1_all_deb//file",
        "@at-spi2-core_2.22.0-6_deb9u1_amd64_deb//file",
        "@ca-certificates-java_20170929_deb9u3_all_deb//file",
        "@ca-certificates_20200601_deb9u1_all_deb//file",
        "@dbus_1.10.32-0_deb9u1_amd64_deb//file",
        "@dconf-gsettings-backend_0.26.0-2_b1_amd64_deb//file",
        "@dconf-service_0.26.0-2_b1_amd64_deb//file",
        "@fontconfig-config_2.11.0-6.7_all_deb//file",
        "@fontconfig_2.11.0-6.7_b1_amd64_deb//file",
        "@fonts-dejavu-core_2.37-1_all_deb//file",
        "@fonts-dejavu-extra_2.37-1_all_deb//file",
        "@glib-networking-common_2.50.0-1_deb9u1_all_deb//file",
        "@glib-networking-services_2.50.0-1_deb9u1_amd64_deb//file",
        "@glib-networking_2.50.0-1_deb9u1_amd64_deb//file",
        "@gnome-icon-theme_3.12.0-2_all_deb//file",
        "@gsettings-desktop-schemas_3.22.0-1_all_deb//file",
        "@gtk-update-icon-cache_3.22.11-1_amd64_deb//file",
        "@hicolor-icon-theme_0.15-1_all_deb//file",
        "@java-common_0.58_deb9u1_all_deb//file",
        "@krb5-locales_1.15-1_deb9u1_all_deb//file",
        "@libapparmor1_2.11.0-3_deb9u2_amd64_deb//file",
        "@libasound2-data_1.1.3-5_all_deb//file",
        "@libasound2_1.1.3-5_amd64_deb//file",
        "@libasyncns0_0.8-6_amd64_deb//file",
        "@libatk-bridge2.0-0_2.22.0-2_amd64_deb//file",
        "@libatk-wrapper-java-jni_0.33.3-13_deb9u1_amd64_deb//file",
        "@libatk-wrapper-java_0.33.3-13_deb9u1_all_deb//file",
        "@libatk1.0-0_2.22.0-1_amd64_deb//file",
        "@libatk1.0-data_2.22.0-1_all_deb//file",
        "@libatspi2.0-0_2.22.0-6_deb9u1_amd64_deb//file",
        "@libavahi-client3_0.6.32-2_amd64_deb//file",
        "@libavahi-common-data_0.6.32-2_amd64_deb//file",
        "@libavahi-common3_0.6.32-2_amd64_deb//file",
        "@libbsd0_0.8.3-1_amd64_deb//file",
        "@libcairo-gobject2_1.14.8-1_amd64_deb//file",
        "@libcairo2_1.14.8-1_amd64_deb//file",
        "@libcolord2_1.3.3-2_amd64_deb//file",
        "@libcroco3_0.6.11-3_amd64_deb//file",
        "@libcups2_2.2.1-8_deb9u6_amd64_deb//file",
        "@libdatrie1_0.2.10-4_b1_amd64_deb//file",
        "@libdbus-1-3_1.10.32-0_deb9u1_amd64_deb//file",
        "@libdconf1_0.26.0-2_b1_amd64_deb//file",
        "@libdrm-amdgpu1_2.4.74-1_amd64_deb//file",
        "@libdrm-intel1_2.4.74-1_amd64_deb//file",
        "@libdrm-nouveau2_2.4.74-1_amd64_deb//file",
        "@libdrm-radeon1_2.4.74-1_amd64_deb//file",
        "@libdrm2_2.4.74-1_amd64_deb//file",
        "@libedit2_3.1-20160903-3_amd64_deb//file",
        "@libegl1-mesa_13.0.6-1_b2_amd64_deb//file",
        "@libepoxy0_1.3.1-2_amd64_deb//file",
        "@libexpat1_2.2.0-2_deb9u3_amd64_deb//file",
        "@libffi6_3.2.1-6_amd64_deb//file",
        "@libflac8_1.3.2-1_amd64_deb//file",
        "@libfontconfig1_2.11.0-6.7_b1_amd64_deb//file",
        "@libfontenc1_1.1.3-1_b2_amd64_deb//file",
        "@libfreetype6_2.6.3-3.2_deb9u1_amd64_deb//file",
        "@libgail-common_2.24.31-2_amd64_deb//file",
        "@libgail18_2.24.31-2_amd64_deb//file",
        "@libgbm1_13.0.6-1_b2_amd64_deb//file",
        "@libgdk-pixbuf2.0-0_2.36.5-2_deb9u2_amd64_deb//file",
        "@libgdk-pixbuf2.0-common_2.36.5-2_deb9u2_all_deb//file",
        "@libgif7_5.1.4-0.4_amd64_deb//file",
        "@libgl1-mesa-dri_13.0.6-1_b2_amd64_deb//file",
        "@libgl1-mesa-glx_13.0.6-1_b2_amd64_deb//file",
        "@libglapi-mesa_13.0.6-1_b2_amd64_deb//file",
        "@libglib2.0-0_2.50.3-2_deb9u2_amd64_deb//file",
        "@libglib2.0-data_2.50.3-2_deb9u2_all_deb//file",
        "@libgmp10_6.1.2_dfsg-1_amd64_deb//file",
        "@libgnutls30_3.5.8-5_deb9u5_amd64_deb//file",
        "@libgpm2_1.20.4-6.2_b1_amd64_deb//file",
        "@libgraphite2-3_1.3.10-1_amd64_deb//file",
        "@libgssapi-krb5-2_1.15-1_deb9u1_amd64_deb//file",
        "@libgtk-3-0_3.22.11-1_amd64_deb//file",
        "@libgtk-3-bin_3.22.11-1_amd64_deb//file",
        "@libgtk-3-common_3.22.11-1_all_deb//file",
        "@libgtk2.0-0_2.24.31-2_amd64_deb//file",
        "@libgtk2.0-bin_2.24.31-2_amd64_deb//file",
        "@libgtk2.0-common_2.24.31-2_all_deb//file",
        "@libharfbuzz0b_1.4.2-1_amd64_deb//file",
        "@libhogweed4_3.3-1_b2_amd64_deb//file",
        "@libice6_1.0.9-2_amd64_deb//file",
        "@libicu57_57.1-6_deb9u4_amd64_deb//file",
        "@libjbig0_2.1-3.1_b2_amd64_deb//file",
        "@libjpeg62-turbo_1.5.1-2_deb9u1_amd64_deb//file",
        "@libjson-glib-1.0-0_1.2.6-1_amd64_deb//file",
        "@libjson-glib-1.0-common_1.2.6-1_all_deb//file",
        "@libk5crypto3_1.15-1_deb9u1_amd64_deb//file",
        "@libkeyutils1_1.5.9-9_amd64_deb//file",
        "@libkrb5-3_1.15-1_deb9u1_amd64_deb//file",
        "@libkrb5support0_1.15-1_deb9u1_amd64_deb//file",
        "@liblcms2-2_2.8-4_deb9u1_amd64_deb//file",
        "@libllvm3.9_3.9.1-9_amd64_deb//file",
        "@libncurses5_6.0_20161126-1_deb9u2_amd64_deb//file",
        "@libnspr4_4.12-6_amd64_deb//file",
        "@libnss3_3.26.2-1.1_deb9u1_amd64_deb//file",
        "@libogg0_1.3.2-1_amd64_deb//file",
        "@libp11-kit0_0.23.3-2_amd64_deb//file",
        "@libpango-1.0-0_1.40.5-1_amd64_deb//file",
        "@libpangocairo-1.0-0_1.40.5-1_amd64_deb//file",
        "@libpangoft2-1.0-0_1.40.5-1_amd64_deb//file",
        "@libpciaccess0_0.13.4-1_b2_amd64_deb//file",
        "@libpcsclite1_1.8.20-1_amd64_deb//file",
        "@libpixman-1-0_0.34.0-1_amd64_deb//file",
        "@libpng16-16_1.6.28-1_deb9u1_amd64_deb//file",
        "@libproxy1v5_0.4.14-2_deb9u1_amd64_deb//file",
        "@libpulse0_10.0-1_deb9u1_amd64_deb//file",
        "@librest-0.7-0_0.8.0-2_amd64_deb//file",
        "@librsvg2-2_2.40.21-0_deb9u1_amd64_deb//file",
        "@librsvg2-common_2.40.21-0_deb9u1_amd64_deb//file",
        "@libsensors4_3.4.0-4_amd64_deb//file",
        "@libsm6_1.2.2-1_b3_amd64_deb//file",
        "@libsndfile1_1.0.27-3_amd64_deb//file",
        "@libsoup-gnome2.4-1_2.56.0-2_deb9u2_amd64_deb//file",
        "@libsoup2.4-1_2.56.0-2_deb9u2_amd64_deb//file",
        "@libsqlite3-0_3.16.2-5_deb9u2_amd64_deb//file",
        "@libssl1.1_1.1.0l-1_deb9u1_amd64_deb//file",
        "@libtasn1-6_4.10-1.1_deb9u1_amd64_deb//file",
        "@libthai-data_0.1.26-1_all_deb//file",
        "@libthai0_0.1.26-1_amd64_deb//file",
        "@libtiff5_4.0.8-2_deb9u5_amd64_deb//file",
        "@libtxc-dxtn-s2tc_1.0_git20151227-2_amd64_deb//file",
        "@libvorbis0a_1.3.5-4_deb9u2_amd64_deb//file",
        "@libvorbisenc2_1.3.5-4_deb9u2_amd64_deb//file",
        "@libwayland-client0_1.12.0-1_deb9u1_amd64_deb//file",
        "@libwayland-cursor0_1.12.0-1_deb9u1_amd64_deb//file",
        "@libwayland-egl1-mesa_13.0.6-1_b2_amd64_deb//file",
        "@libwayland-server0_1.12.0-1_deb9u1_amd64_deb//file",
        "@libwrap0_7.6.q-26_amd64_deb//file",
        "@libx11-6_1.6.4-3_deb9u3_amd64_deb//file",
        "@libx11-data_1.6.4-3_deb9u3_all_deb//file",
        "@libx11-xcb1_1.6.4-3_deb9u3_amd64_deb//file",
        "@libxau6_1.0.8-1_amd64_deb//file",
        "@libxaw7_1.0.13-1_b2_amd64_deb//file",
        "@libxcb-dri2-0_1.12-1_amd64_deb//file",
        "@libxcb-dri3-0_1.12-1_amd64_deb//file",
        "@libxcb-glx0_1.12-1_amd64_deb//file",
        "@libxcb-present0_1.12-1_amd64_deb//file",
        "@libxcb-render0_1.12-1_amd64_deb//file",
        "@libxcb-shape0_1.12-1_amd64_deb//file",
        "@libxcb-shm0_1.12-1_amd64_deb//file",
        "@libxcb-sync1_1.12-1_amd64_deb//file",
        "@libxcb-xfixes0_1.12-1_amd64_deb//file",
        "@libxcb1_1.12-1_amd64_deb//file",
        "@libxcomposite1_0.4.4-2_amd64_deb//file",
        "@libxcursor1_1.1.14-1_deb9u2_amd64_deb//file",
        "@libxdamage1_1.1.4-2_b3_amd64_deb//file",
        "@libxdmcp6_1.1.2-3_amd64_deb//file",
        "@libxext6_1.3.3-1_b2_amd64_deb//file",
        "@libxfixes3_5.0.3-1_amd64_deb//file",
        "@libxft2_2.3.2-1_b2_amd64_deb//file",
        "@libxi6_1.7.9-1_amd64_deb//file",
        "@libxinerama1_1.1.3-1_b3_amd64_deb//file",
        "@libxkbcommon0_0.7.1-2_deb9u1_amd64_deb//file",
        "@libxml2_2.9.4_dfsg1-2.2_deb9u3_amd64_deb//file",
        "@libxmu6_1.1.2-2_amd64_deb//file",
        "@libxmuu1_1.1.2-2_amd64_deb//file",
        "@libxpm4_3.5.12-1_amd64_deb//file",
        "@libxrandr2_1.5.1-1_amd64_deb//file",
        "@libxrender1_0.9.10-1_amd64_deb//file",
        "@libxshmfence1_1.2-1_b2_amd64_deb//file",
        "@libxt6_1.1.5-1_amd64_deb//file",
        "@libxtst6_1.2.3-1_amd64_deb//file",
        "@libxv1_1.0.11-1_amd64_deb//file",
        "@libxxf86dga1_1.1.4-1_b3_amd64_deb//file",
        "@libxxf86vm1_1.1.4-1_b2_amd64_deb//file",
        "@openjdk-8-jre-headless_8u265-b01-0_deb9u1_amd64_deb//file",
        "@openjdk-8-jre_8u265-b01-0_deb9u1_amd64_deb//file",
        "@openssl_1.1.0l-1_deb9u1_amd64_deb//file",
        "@sgml-base_1.29_all_deb//file",
        "@shared-mime-info_1.8-1_deb9u1_amd64_deb//file",
        "@tcpd_7.6.q-26_amd64_deb//file",
        "@ucf_3.0036_all_deb//file",
        "@x11-common_7.7_19_all_deb//file",
        "@x11-utils_7.7_3_b1_amd64_deb//file",
        "@xdg-user-dirs_0.15-2_b1_amd64_deb//file",
        "@xkb-data_2.19-1_deb9u1_all_deb//file",
        "@xml-core_0.17_all_deb//file",
    ],
)

container_image(
    name = "openjdk_debs_installer",
    base = "@debian_base//image",
    cmd = "",
    entrypoint = "",
    layers = [":openjdk_debs_layer"],
)

container_run_and_commit(
    name = "openjdk_debs_install",
    commands = [
        "dpkg -i *.deb",
        "rm *.deb",
    ],
    image = ":openjdk_debs_installer.tar",
)

container_image(
    name = "my_image",
    base = ":openjdk_debs_install_commit.tar",
    entrypoint = "java",
)
